import copy

def run(securities):

	for security in securities:
		if security['Updated']==True:
			#then we need to run a search from this point
			trade={}
			trade['Price']=0
			trade['UnmatchedLegs']=[]

			securitiesToPass = copy.deepcopy(securities)
			recursiveSearch(trade, security, securitiesToPass, 0)

def recursiveSearch(trade, security, securities, depth):
	if depth>0 and len(trade['UnmatchedLegs']==0):
		print('Found a trade for ' + str(trade['Price']) + ' with depth ' + str(depth) + '.')
		return
	
	trade['Price']=trade['Price'] + security['Price']
	trade['UnmatchedLegs']=copy.deepcopy(security['Legs'])

	securitiesToPass = copy.deepcopy(securities)
	index = securitiesToPass.index(security)
	securitiesToPass.pop(index)

	for securityToPass in securitiesToPass:
		recursiveSearch(trade, securityToPass, securitiesToPass, depth+1)
